# Migration Card: `std/os/linux/sparc64.zig`

## 1) Concept

This file provides low-level SPARC64 Linux system call implementations and type definitions for the Zig standard library. It contains architecture-specific inline assembly implementations of core system calls like `pipe`, `fork`, `clone`, and generic syscall wrappers that handle the SPARC64 calling convention and trap-based system call mechanism.

Key components include:
- Raw syscall wrappers (`syscall0` through `syscall6`) with SPARC64 register allocation
- Specialized implementations for `pipe`, `fork`, and `clone` that handle SPARC64-specific return value conventions
- Signal handling support with `restore_rt` function
- SPARC64-specific type definitions (`off_t`, `ino_t`, `Stat` struct)
- VDSO (Virtual Dynamic Shared Object) configuration for optimized system calls

## 2) The 0.11 vs 0.16 Diff

**No significant API migration changes detected.** This file contains architecture-specific low-level system call implementations that remain stable across Zig versions. Key observations:

- **No allocator requirements**: These are raw syscall wrappers that don't allocate memory
- **No I/O interface changes**: These are the fundamental building blocks, not high-level I/O abstractions
- **Error handling unchanged**: Consistently returns raw error codes as `u64` (SPARC64 convention)
- **API structure stable**: All functions maintain the same signatures as low-level system call interfaces

The functions follow a consistent pattern of taking system call numbers from `SYS` enum and returning raw results, which is appropriate for this architectural layer.

## 3) The Golden Snippet

```zig
const std = @import("std");
const linux = std.os.linux;

// Using the generic syscall interface
const result = linux.sparc64.syscall2(
    linux.SYS.write,
    @as(u64, 1), // stdout file descriptor
    @intFromPtr("Hello, SPARC64!\n"),
    "Hello, SPARC64!\n".len
);

if (result > 0xfffffffffffff000) {
    // Error case - handle system call failure
    const errno = @as(i32, @intCast(-@as(i64, @bitCast(result))));
    std.debug.print("write failed with errno: {}\n", .{errno});
} else {
    // Success - result contains bytes written
    std.debug.print("wrote {} bytes\n", .{result});
}
```

## 4) Dependencies

- `builtin` - For target-specific configuration and feature detection
- `std` - Core standard library imports
- `std.os.linux.SYS` - System call number definitions
- `std.os.linux` types (`uid_t`, `gid_t`, `timespec`) - For structure definitions

**Note**: This file is architecture-specific and would only be used when targeting SPARC64 Linux systems. Most Zig code should use the portable OS abstractions in `std.os` rather than calling these low-level interfaces directly.