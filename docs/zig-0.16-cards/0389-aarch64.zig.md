# Migration Card: Linux AArch64 System Interface

## 1) Concept

This file provides low-level Linux system call interfaces and type definitions specifically for AArch64 (ARM64) architecture. It contains inline assembly implementations of system call wrappers (`syscall0` through `syscall6`) that make direct Linux kernel calls using the `svc #0` instruction. The file also defines architecture-specific type aliases (like `blksize_t`, `time_t`, `off_t`) and the `Stat` structure for file metadata that matches the Linux kernel's AArch64 ABI.

Key components include raw system call functions with varying argument counts, special implementations for `clone()` and signal handling (`restore_rt`), VDSO (Virtual Dynamic Shared Object) definitions for optimized system calls, and the AArch64-specific `Stat` structure layout with timestamp accessor methods.

## 2) The 0.11 vs 0.16 Diff

**No significant public API migration changes detected** in this architecture-specific system interface file. The functions maintain consistent signatures:

- **System call wrappers**: All `syscallN()` functions maintain the same signature (`SYS, u64... -> u64`) with inline assembly implementations
- **Type definitions**: Architecture-specific types (`blksize_t`, `time_t`, `mode_t`, etc.) remain stable
- **Stat structure**: The `Stat` extern struct and its accessor methods (`atime()`, `mtime()`, `ctime()`) maintain consistent interfaces
- **Low-level assembly**: The `clone()` and `restore_rt()` naked functions preserve their calling conventions

The primary changes are internal implementation details:
- Use of `@intFromEnum()` instead of deprecated enum-to-int conversion
- Consistent `.naked` calling convention (vs potential capitalization changes)
- Assembly syntax updates for different backends (stage2_c vs others)

## 3) The Golden Snippet

```zig
const std = @import("std");
const linux = std.os.linux;

// Example: Using the Stat structure to read file metadata
pub fn printFileTimes() void {
    const stat: linux.aarch64.Stat = undefined; // In real usage, populated via stat syscall
    
    // Access timestamp information using the provided methods
    const access_time = stat.atime();
    const modify_time = stat.mtime();
    const change_time = stat.ctime();
    
    // stat fields are directly accessible per AArch64 ABI
    const file_size = stat.size;
    const mode = stat.mode;
}
```

## 4) Dependencies

- `builtin` (for target configuration and backend detection)
- `std` (via `../../std.zig`)
- `std.os.linux.SYS` (system call number definitions)
- `std.os.linux` types (`timespec`, `uid_t`, `gid_t`)

**Note**: This is an architecture-specific low-level interface. Most applications should use higher-level abstractions in `std.fs`, `std.os`, or `std.Thread` rather than calling these functions directly.