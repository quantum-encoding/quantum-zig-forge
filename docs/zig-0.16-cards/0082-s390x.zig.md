# Migration Card: std/Target/s390x.zig

## 1) Concept

This file is an auto-generated CPU feature definition module for IBM s390x (System/390) architecture targets. It defines the complete set of hardware features available across different s390x processor generations, from z196 through z17 and architectural levels arch8 through arch15. The file serves as a central registry for s390x-specific CPU capabilities that can be used for target-specific optimizations, conditional compilation, and compiler code generation.

Key components include:
- A comprehensive `Feature` enum with 50+ s390x-specific hardware features like vector extensions, decimal floating point operations, transactional execution, and security assists
- Predefined CPU models (z196, zEC12, z13, z14, z15, z16, z17) with their respective feature sets
- Architecture-level models (arch8 through arch15) representing different ISA generations
- Feature set utility functions for testing CPU capabilities

## 2) The 0.11 vs 0.16 Diff

**No breaking API changes detected.** This file contains only data definitions and generated feature set functions that follow consistent patterns across Zig versions:

- **No explicit allocator requirements** - All data is compile-time constants
- **No I/O interface changes** - Pure data definitions without I/O operations
- **No error handling changes** - All operations are infallible at runtime
- **API structure consistency** - Feature set functions maintain the same signature pattern

The public API consists of:
- `Feature` enum (stable enum definition)
- `featureSet`, `featureSetHas`, `featureSetHasAny`, `featureSetHasAll` functions (generated by `CpuFeature.FeatureSetFns`)
- `all_features` array (compile-time constant)
- `cpu` namespace with pre-defined CPU models (struct initializations)

## 3) The Golden Snippet

```zig
const std = @import("std");
const s390x = std.Target.s390x;

// Check if a CPU model supports specific features
const z16 = s390x.cpu.z16;
const has_vector = s390x.featureSetHas(z16.features, .vector);
const has_transactional_execution = s390x.featureSetHas(z16.features, .transactional_execution);

// Create a custom feature set
const my_features = s390x.featureSet(&[_]s390x.Feature{
    .vector,
    .population_count,
    .load_store_on_cond,
});

// Test feature combinations
const has_any_vector = s390x.featureSetHasAny(my_features, s390x.featureSet(&[_]s390x.Feature{
    .vector, 
    .vector_enhancements_1
}));
```

## 4) Dependencies

- `std.Target.Cpu` - Core CPU feature and model definitions
- `std.Target.Cpu.Feature` - Feature set functionality
- `std.Target.Cpu.Model` - CPU model structure
- `std.debug` - Runtime assertions for validation

**Note**: This is an architecture-specific target definition file that follows the same auto-generated pattern as other CPU architecture modules in Zig's standard library.