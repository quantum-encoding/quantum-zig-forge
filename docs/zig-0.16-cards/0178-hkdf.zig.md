# Migration Card: std/crypto/hkdf.zig

## 1) Concept

This file implements HMAC-based Key Derivation Function (HKDF) for Zig's standard library crypto module. It provides a generic HKDF construction that can be instantiated with different HMAC algorithms. The key components include:

- Two concrete implementations: `HkdfSha256` and `HkdfSha512` for common hash algorithms
- A generic `Hkdf` function that returns a struct type parameterized by an HMAC implementation
- Core operations: `extract` (one-shot key derivation), `extractInit` (streaming key derivation), and `expand` (key expansion)

The implementation follows the HKDF RFC standard, providing both single-step and streaming interfaces for key derivation from initial keying material.

## 2) The 0.11 vs 0.16 Diff

**No significant API changes detected** - this crypto module maintains stable patterns:

- **No explicit allocator requirements**: All operations work with stack-allocated arrays and slices
- **No I/O interface changes**: Pure computational functions without external dependencies
- **Error handling unchanged**: Uses assertions for bounds checking rather than error returns
- **API structure consistent**: Factory pattern with `Hkdf(Hmac)` returning a struct type

The API follows Zig 0.16's preferred patterns:
- Generic type construction via `Hkdf(comptime Hmac: type) type`
- Stack-based memory management (no allocators needed)
- Compile-time polymorphism

## 3) The Golden Snippet

```zig
const std = @import("std");
const HkdfSha256 = std.crypto.hkdf.HkdfSha256;

// Single-step extraction and expansion
const salt = "test-salt";
const ikm = "initial-key-material";
const context = "application-context";

const prk = HkdfSha256.extract(salt, ikm);
var output_key: [32]u8 = undefined;
HkdfSha256.expand(&output_key, context, prk);

// Streaming extraction for chunked input
var hkdf = HkdfSha256.extractInit(salt);
hkdf.update("chunk1");
hkdf.update("chunk2");
var prk2: [HkdfSha256.prk_length]u8 = undefined;
hkdf.final(&prk2);
```

## 4) Dependencies

- `std.debug` (for `assert`)
- `std.crypto.auth.hmac` (core HMAC functionality)
- `std.mem` (memory operations)

**Note**: This is a stable crypto utility module with minimal external dependencies and no breaking API changes from Zig 0.11 patterns.