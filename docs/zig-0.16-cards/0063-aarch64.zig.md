# Migration Analysis: AArch64 CPU Features

## 1) Concept

This file defines AArch64 (ARM64) CPU features and models for Zig's target system. It contains:

- An exhaustive enumeration of AArch64 CPU features (crypto extensions, SIMD capabilities, architectural versions, etc.)
- Feature set utility functions for checking feature combinations
- Predefined CPU models with their specific feature sets
- Feature dependency relationships between different CPU capabilities

The file is auto-generated by `tools/update_cpu_features.zig` and serves as the foundation for target-aware compilation, optimization, and CPU feature detection in the Zig compiler for AArch64 architectures.

## 2) The 0.11 vs 0.16 Diff

This file contains **data definitions only** - no public function APIs that developers would directly call. The public exports are:

- `Feature` enum (297 CPU feature variants)
- Feature set utility functions (`featureSet`, `featureSetHas`, etc.)
- `all_features` array mapping
- `cpu` struct with predefined CPU models

**No migration changes detected** because:
- No explicit allocator requirements (pure data/enum definitions)
- No I/O interface changes (no I/O operations)
- No error handling changes (no functions that return errors)
- No API structure changes (no init/open patterns)

The feature set utilities are generic functions from `std.Target.Cpu.FeatureSetFns` and don't expose AArch64-specific signatures.

## 3) The Golden Snippet

```zig
const std = @import("std");
const aarch64 = std.Target.aarch64;

// Check if a CPU model supports specific features
const cpu_model = aarch64.cpu.cortex_a78;
const has_neon = aarch64.featureSetHas(cpu_model.features, .neon);
const has_crypto = aarch64.featureSetHas(cpu_model.features, .crypto);

// Use feature detection for conditional compilation
if (aarch64.featureSetHasAny(cpu_model.features, .{ .sve, .sve2 })) {
    // Use SVE optimized code path
} else if (aarch64.featureSetHas(cpu_model.features, .neon)) {
    // Use NEON optimized code path  
} else {
    // Use scalar fallback
}
```

## 4) Dependencies

- `std` (root import)
- `std.Target.Cpu` (feature and model definitions)
- `std.debug` (for assertions in `all_features`)

This is a leaf node in the dependency graph - it doesn't import many modules but is heavily imported by target-aware components in the compiler.