# Migration Card: std/crypto/md5.zig

## 1) Concept
This file implements the MD5 hash algorithm in Zig. It provides a streaming interface for computing MD5 hashes along with convenience one-shot functions. The implementation includes the core MD5 transformation rounds and follows the standard MD5 specification with the four rounds of processing.

Key components include:
- `Md5` struct containing the hash state, buffer, and counters
- Streaming interface with `init()`, `update()`, and `final()` methods
- One-shot convenience functions `hash()` and `hashResult()`
- Internal round computation functions implementing the MD5 algorithm

## 2) The 0.11 vs 0.16 Diff

### Explicit Allocator Requirements
- **No allocator required**: The MD5 implementation is entirely stack-based and doesn't require any memory allocation
- **Direct struct initialization**: Uses `init(options: Options)` pattern with empty options struct for consistency

### I/O Interface Changes
- **Streaming pattern unchanged**: Maintains the traditional `init/update/final` pattern without dependency injection
- **Direct buffer operations**: Uses `@memcpy` and `@memset` intrinsics directly on internal buffers

### Error Handling Changes
- **No error returns**: All public functions are `void`-returning or return values directly
- **No error sets**: Consistent with cryptographic hash functions that don't typically fail

### API Structure Changes
- **Consistent init pattern**: `init(Options)` with empty options struct for future extensibility
- **No breaking changes**: The public API appears stable with no major structural migrations needed

## 3) The Golden Snippet

```zig
const std = @import("std");
const Md5 = std.crypto.Md5;

// One-shot hashing
var out: [Md5.digest_length]u8 = undefined;
Md5.hash("hello world", &out, .{});

// Streaming interface
var hasher = Md5.init(.{});
hasher.update("hello");
hasher.update(" ");
hasher.update("world");
hasher.final(&out);
```

## 4) Dependencies
- `std.mem` - For memory operations and integer serialization
- `std.math` - For bit rotation operations (`rotl`)

This implementation remains largely unchanged from 0.11 patterns, maintaining the simple, allocation-free API that cryptographic hash functions typically provide.