# Migration Card: UEFI EDID Protocol

## 1) Concept

This file defines Zig bindings for UEFI EDID (Extended Display Identification Data) protocols. It provides three main protocol structures for handling display identification data in UEFI environments:

- `Active`: Contains EDID information for an active video output device
- `Discovered`: Contains EDID information for a discovered video output device  
- `Override`: Provides functionality to override EDID information with custom policies and replacement data

The key components are UEFI protocol GUID definitions and methods for retrieving and overriding display identification data, which are essential for graphics initialization and display management in UEFI firmware.

## 2) The 0.11 vs 0.16 Diff

**Explicit Allocator Requirements**: No allocator dependencies found. The `getEdid` function returns slices backed by UEFI-managed memory.

**I/O Interface Changes**: Uses UEFI-specific calling convention (`callconv(cc)`) and follows UEFI protocol patterns with function pointer dispatch.

**Error Handling Changes**: 
- Uses union error sets: `GetEdidError = uefi.UnexpectedError || error{Unsupported}`
- Error handling follows Zig 0.16's strict error set typing
- Uses `uefi.unexpectedStatus()` for status code conversion

**API Structure Changes**:
- Protocol-based design with GUID identification
- Function pointer dispatch through `_get_edid` field
- Returns structured data (`Edid` struct) instead of raw pointers

## 3) The Golden Snippet

```zig
const edid_protocol = std.os.uefi.protocol.edid;

// Assuming we have an Override protocol instance and a device handle
var edid_override: *const edid_protocol.Override = ...;
var device_handle: edid_protocol.Handle = ...;

// Get EDID information with override policy
const edid_info = try edid_override.getEdid(device_handle);

// Use the retrieved EDID data
if (edid_info.edid) |edid_data| {
    // Process EDID bytes
    const edid_size = edid_data.len;
    // ... use edid_data[0..edid_size]
}

// Check override attributes
if (edid_info.attributes.dont_override) {
    // Handle don't override policy
}
```

## 4) Dependencies

- `std.os.uefi` - Core UEFI types and utilities
- `std.os.uefi.Guid` - UEFI GUID handling
- `std.os.uefi.Handle` - UEFI handle types  
- `std.os.uefi.Status` - UEFI status codes and error handling
- `std.os.uefi.cc` - UEFI calling conventions

**Primary Dependencies**: UEFI protocol infrastructure, status/error handling, GUID management