# Migration Card: std/crypto/sha3.zig

## 1) Concept

This file implements various SHA-3 cryptographic hash functions and related algorithms in Zig's standard library. It provides type-safe implementations of SHA-3 variants (224, 256, 384, 512-bit), Keccak functions, SHAKE extendable output functions, cSHAKE, KMAC authentication functions, and TupleHash. The key components are generic type functions that generate specific hash algorithm implementations with compile-time parameters for security levels, delimiters, and round counts.

The implementation follows a streaming API pattern with `init/update/final` methods for incremental hashing, plus convenience `hash` functions for one-shot operations. All functions are designed to work without heap allocation, using stack-based state management.

## 2) The 0.11 vs 0.16 Diff

**Explicit Options Pattern**: All hash functions now use structured options instead of individual parameters:

```zig
// 0.16 pattern - options struct
var h = Sha3_256.init(.{}); // or .{.delim = 0x06}
h.update(data);
h.final(&output);

// Compare to hypothetical 0.11 pattern (inferred):
// var h = Sha3_256.init();
```

**No Allocator Requirements**: Unlike many Zig 0.16 APIs, these hash functions don't require explicit allocators - they use stack-based state management.

**Enhanced Type Safety**: Functions like `TurboShake128` and `CShake` use comptime parameters for type generation rather than runtime configuration.

**Consistent API Structure**: All hash types follow the same pattern:
- `init(Options)` for state initialization
- `update([]const u8)` for data absorption
- `final([]u8)` for output generation
- `hash(input, output, Options)` for one-shot operations

**XOF Support**: Extendable output functions (SHAKE, cSHAKE) provide `squeeze([]u8)` for variable-length output generation.

## 3) The Golden Snippet

```zig
const std = @import("std");
const Sha3_256 = std.crypto.sha3.Sha3_256;

pub fn main() void {
    const input = "hello world";
    var output: [Sha3_256.digest_length]u8 = undefined;
    
    // One-shot hashing
    Sha3_256.hash(input, &output, .{});
    
    // Streaming hashing
    var hasher = Sha3_256.init(.{});
    hasher.update("hello");
    hasher.update(" ");
    hasher.update("world");
    hasher.final(&output);
    
    std.debug.print("SHA3-256 hash: {s}\n", .{std.fmt.bytesToHex(output, .lower)});
}
```

## 4) Dependencies

- `std.mem` - Memory operations and utilities
- `std.math` - Mathematical operations and assertions
- `std.debug` - Debug assertions
- `std.crypto.core.keccak` - Core Keccak permutation implementation
- `kangarootwelve.zig` - KangarooTwelve algorithm implementation
- `test.zig` - Hash testing utilities (test-only)

**Note**: This file contains no heap allocation dependencies and relies primarily on core cryptographic primitives and memory utilities.