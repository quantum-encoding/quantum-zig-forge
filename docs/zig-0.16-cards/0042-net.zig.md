# Migration Card: std.Io.net.zig

## 1) Concept
This file provides networking primitives for the Zig standard library's I/O system. It defines core networking types including IP address handling (IPv4/IPv6), socket operations, and network stream interfaces. Key components include:

- `IpAddress` union type supporting both IPv4 and IPv6 addresses with parsing/formatting capabilities
- `Socket` type for connectionless communication (UDP-style)
- `Stream` type for connection-oriented communication (TCP-style) with Reader/Writer interfaces
- `Server` type for accepting incoming connections
- Unix domain socket support (where available)
- Network interface resolution and management

The module provides platform-abstracted networking operations through dependency-injected I/O interfaces.

## 2) The 0.11 vs 0.16 Diff

**Explicit I/O Interface Dependency Injection:**
- All networking operations now require explicit `Io` parameter: `listen`, `bind`, `connect`, `accept`, `send`, `receive`
- Functions like `resolve`, `formatResolved` require `Io` for interface name resolution
- Reader/Writer construction requires explicit buffer allocation

**API Structure Changes:**
- Factory functions replaced with methods on address types: `IpAddress.listen()`, `UnixAddress.listen()`
- Explicit `ListenOptions`, `BindOptions`, `ConnectOptions` structs instead of parameter lists
- Timeout handling through `Io.Timeout` type in connect/receive operations

**Error Handling:**
- Specific error sets per operation: `ListenError`, `BindError`, `ConnectError`, `AcceptError`
- Granular network errors: `AddressInUse`, `ConnectionRefused`, `NetworkDown`, etc.
- Timeout errors integrated with `Io.Timeout.Error`

**Initialization Patterns:**
- No allocator parameters in public API (buffers provided explicitly)
- Socket/Stream creation through address methods rather than standalone functions
- Reader/Writer initialization with explicit buffer parameters

## 3) The Golden Snippet

```zig
const std = @import("std");
const Io = std.Io;

// Create TCP server on localhost:8080
const addr = try IpAddress.parse("127.0.0.1", 8080);
var server = try addr.listen(io, .{
    .kernel_backlog = 128,
    .reuse_address = true,
});

// Accept incoming connection
var stream = try server.accept(io);

// Create buffered reader/writer
var read_buffer: [4096]u8 = undefined;
var write_buffer: [4096]u8 = undefined;
var reader = stream.reader(io, &read_buffer);
var writer = stream.writer(io, &write_buffer);

// Use stream...
stream.close(io);
server.deinit(io);
```

## 4) Dependencies

- `std.mem` - Memory operations and comparisons
- `std.fmt` - Integer parsing and formatting
- `std.math` - Arithmetic operations with overflow checking
- `std.debug` - Assertions
- Platform-specific imports: `std.posix` (Unix), `std.os.windows` (Windows)

**Core I/O Modules:**
- `std.Io` - Main I/O interface definitions
- `std.Io.Timeout` - Timeout handling
- Platform-specific socket APIs through Io vtable

This module has heavy dependency on the Io abstraction layer and platform-specific networking implementations.