# Migration Card: `std/math.zig`

## 1) Concept

This file is Zig's standard library mathematical module providing fundamental mathematical constants, functions, and utilities. It serves as a comprehensive math library offering:

- Mathematical constants (e, pi, phi, tau, etc.)
- Floating-point operations (trigonometric, exponential, logarithmic functions)
- Integer arithmetic with overflow checking
- Bit manipulation operations (rotations, shifts)
- Floating-point comparison utilities (approxEqAbs, approxEqRel)
- Type utilities for integer ranges and bit operations
- Conversion functions between degrees and radians

The module is designed to be generic, supporting various numeric types including integers, floats, and vectors, with comptime type safety.

## 2) The 0.11 vs 0.16 Diff

**No Breaking API Changes Detected**

Analysis of the public function signatures reveals this module maintains stable interfaces between Zig 0.11 and 0.16:

- **No explicit allocator requirements**: Mathematical operations are pure computations without memory allocation
- **No I/O interface changes**: The module contains no I/O operations
- **Stable error handling**: Error types remain consistent (Overflow, DivisionByZero, etc.)
- **Consistent API structure**: Function signatures follow established patterns without init/open changes

The mathematical functions maintain backward compatibility with the same parameter types and return patterns. The module extensively uses comptime generics and type parameters which have remained stable.

## 3) The Golden Snippet

```zig
const std = @import("std");
const math = std.math;

test "mathematical operations example" {
    // Floating-point comparison with tolerance
    const a: f32 = 1.0 + math.floatEps(f32);
    const b: f32 = 1.0;
    try std.testing.expect(math.approxEqAbs(f32, a, b, 2 * math.floatEps(f32)));
    
    // Degree/radian conversion
    const degrees: f32 = 90.0;
    const radians = math.degreesToRadians(degrees);
    try std.testing.expectApproxEqAbs(@as(f32, math.pi / 2.0), radians, 1e-6);
    
    // Safe arithmetic with overflow checking
    const result = try math.mul(i32, 1000, 2000);
    try std.testing.expectEqual(@as(i32, 2000000), result);
    
    // Bit manipulation
    const rotated = math.rotr(u8, 0b00000001, 1);
    try std.testing.expectEqual(@as(u8, 0b10000000), rotated);
}
```

## 4) Dependencies

The module has minimal dependencies, primarily relying on:

- **`std.mem`** - For Alignment type and byte alignment utilities
- **`std.debug`** - For runtime assertions
- **`std.testing`** - For test infrastructure
- **Internal math submodules** - Specialized implementations in `math/` directory

The dependency graph is lightweight, focusing on core language features rather than complex system interactions.