# Migration Card: `std/os/windows/kernel32.zig`

## 1) Concept

This file contains direct foreign function interface (FFI) declarations for the Windows kernel32 API. It provides low-level bindings to Windows system calls for file operations, process management, threading, memory allocation, console I/O, and system information. The file serves as a thin wrapper around kernel32.dll exports, maintaining the exact C ABI calling conventions (.winapi) and type signatures required by the Windows API.

Key components include I/O operations (file reading/writing, directory monitoring), process/thread management, synchronization primitives (events, condition variables, SRW locks), memory management (virtual memory, heap operations), and console manipulation functions. Each function is declared with `pub extern "kernel32"` and includes detailed comments about their underlying NT system call implementations.

## 2) The 0.11 vs 0.16 Diff

This file contains **direct Windows API bindings** that follow the **C ABI interface pattern**. As such, there are no Zig-specific migration changes between 0.11 and 0.16 because:

- **No explicit allocators**: These are raw system calls, not Zig-managed APIs
- **No I/O interface changes**: Direct Windows HANDLE-based I/O remains unchanged
- **No error handling changes**: Functions return Windows BOOL/DWORD with GetLastError() pattern
- **No API structure changes**: These are stable Windows API functions

The signatures are identical to what would be used in Zig 0.11 because they must maintain compatibility with the Windows kernel32.dll interface specification.

## 3) The Golden Snippet

```zig
const std = @import("std");
const kernel32 = std.os.windows.kernel32;

// Example: Reading from a file using ReadFile
pub fn readFileExample(hFile: kernel32.HANDLE, buffer: []u8) !void {
    var bytes_read: kernel32.DWORD = undefined;
    
    const success = kernel32.ReadFile(
        hFile,
        buffer.ptr,
        @as(kernel32.DWORD, @intCast(buffer.len)),
        &bytes_read,
        null, // no overlapped I/O
    );
    
    if (success == 0) {
        return switch (kernel32.GetLastError()) {
            .IO_PENDING, .BROKEN_PIPE => error.WouldBlock,
            else => error.ReadFailed,
        };
    }
    
    // Use the read data...
}
```

## 4) Dependencies

- `std.os.windows` - Core Windows type definitions (HANDLE, DWORD, BOOL, etc.)
- `std.os.windows` constants and structures (FILE_NOTIFY_INFORMATION, CONSOLE_SCREEN_BUFFER_INFO, etc.)
- Windows-specific error types (`Win32Error`)

**Note**: This file contains direct system call bindings, so it has minimal Zig standard library dependencies beyond type definitions.