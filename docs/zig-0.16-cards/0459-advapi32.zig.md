# Migration Card: `std/os/windows/advapi32.zig`

## 1) Concept
This file provides Zig bindings for the Windows Advanced API 32 (advapi32.dll), which contains functions for Windows security, registry, and system services. The file exposes low-level Windows API functions for registry manipulation (`RegOpenKeyExW`, `RegQueryValueExW`, `RegGetValueW`, etc.) and cryptographic random number generation (`RtlGenRandom`). It defines Windows-specific types and constants needed to interact with the Windows Registry system through direct foreign function interface (FFI) calls.

Key components include registry operation functions for opening, querying, and closing registry keys, plus the `RRF` struct that defines registry value type constants and flags used with `RegGetValueW`. The bindings maintain the exact Windows API signatures and calling conventions.

## 2) The 0.11 vs 0.16 Diff
This file contains raw Windows API bindings that remain largely unchanged between Zig versions. The migration impact is minimal because:

- **No Allocator Changes**: These are direct system calls that don't use Zig allocators
- **No I/O Interface Changes**: Functions use Windows HANDLE/HKEY types directly
- **Error Handling**: Uses Windows `LSTATUS` error codes consistently
- **API Structure**: Maintains original Windows API patterns (`RegOpenKeyExW`, `RegCloseKey`)

The only notable pattern is the use of `callconv(.winapi)` which has been stable in Zig's Windows FFI support. These bindings follow the same patterns in both 0.11 and 0.16 since they mirror the underlying Windows API.

## 3) The Golden Snippet
```zig
const advapi32 = @import("std").os.windows.advapi32;

// Open a registry key
var hKey: advapi32.HKEY = undefined;
const status = advapi32.RegOpenKeyExW(
    advapi32.HKEY_CURRENT_USER,
    "Software\\MyApp",
    0,
    advapi32.KEY_READ,
    &hKey,
);

if (status == advapi32.ERROR_SUCCESS) {
    defer advapi32.RegCloseKey(hKey);
    
    // Query a DWORD value
    var data: u32 = undefined;
    var dataSize: u32 = @sizeOf(u32);
    var valueType: u32 = undefined;
    
    const queryStatus = advapi32.RegGetValueW(
        hKey,
        null,
        "SomeValue",
        advapi32.RRF.RT_DWORD,
        &valueType,
        @as(*anyopaque, @ptrCast(&data)),
        &dataSize,
    );
}
```

## 4) Dependencies
- `std.os.windows` - Windows type definitions and constants
- Windows system library `advapi32.dll` (implicit external dependency)

This file contains minimal Zig standard library dependencies since it primarily defines external function bindings to the Windows system API.