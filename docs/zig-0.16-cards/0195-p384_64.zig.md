# Migration Card: P-384 Field Arithmetic Implementation

## 1) Concept
This file implements low-level field arithmetic operations for the P-384 elliptic curve (NIST curve over a 384-bit prime field). It provides optimized Montgomery domain arithmetic functions for cryptographic operations including multiplication, squaring, addition, subtraction, and conversions between Montgomery and standard representations. The code is auto-generated using specialized tools and implements constant-time operations to prevent side-channel attacks.

Key components include:
- Montgomery domain field element types (`[6]u64` arrays)
- Core arithmetic operations (mul, square, add, sub, opp)
- Domain conversion functions (to/from Montgomery)
- Serialization utilities (to/from bytes)
- Constant-time conditional selection
- Modular inversion support via divstep

## 2) The 0.11 vs 0.16 Diff

**No significant API changes detected** - This is a low-level arithmetic implementation with stable signatures:

- **No allocator requirements**: All operations work on stack-allocated arrays
- **No I/O interface changes**: Pure mathematical functions without I/O
- **No error handling changes**: All functions are `void` returning with no error conditions
- **API structure**: Consistent output-pointer-first pattern throughout

Function signatures follow a consistent pattern:
- Output parameter as first argument (pointer to result)
- Input parameters as value types (arrays passed by value)
- No memory allocation or deallocation
- All bounds checking handled via compile-time types

## 3) The Golden Snippet

```zig
const std = @import("std");
const p384 = @import("std/crypto/pcurves/p384/p384_64.zig");

pub fn main() void {
    var result: p384.MontgomeryDomainFieldElement = undefined;
    const a = p384.MontgomeryDomainFieldElement{ 0x1, 0x0, 0x0, 0x0, 0x0, 0x0 };
    const b = p384.MontgomeryDomainFieldElement{ 0x2, 0x0, 0x0, 0x0, 0x0, 0x0 };

    // Multiply two field elements in Montgomery domain
    p384.mul(&result, a, b);
    
    // The result now contains a * b in Montgomery domain
}
```

## 4) Dependencies
- `std` - Standard library import (minimal usage)
- `builtin.mode` - Only used for runtime safety checks in debug mode

**Note**: This is a self-contained arithmetic implementation with minimal dependencies, primarily using only core language features and basic standard library imports.