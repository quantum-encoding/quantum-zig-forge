# Migration Card: std/crypto/codecs/asn1/Oid.zig

## 1) Concept

This file implements ASN.1 Object Identifier (OID) handling for Zig's cryptography library. OIDs are globally unique hierarchical identifiers made of integer sequences, commonly used to identify standards, algorithms, certificate extensions, organizations, or policy documents. The key component is the `Oid` struct containing an `encoded` byte slice, with functions to convert between dot notation (e.g., "1.2.840.113549") and DER-encoded binary format, plus compile-time OID operations and enum mapping capabilities.

## 2) The 0.11 vs 0.16 Diff

**Explicit Allocator Requirements**: No allocator is required for the public API. The main functions use caller-provided buffers:
- `fromDot(dot_notation: []const u8, out: []u8)` - uses fixed output buffer
- `toDot(self: Oid, writer: anytype)` - generic writer interface

**I/O Interface Changes**: Uses dependency injection pattern with generic writers:
- `toDot` accepts any writer type using `@TypeOf(writer).Error` return type
- Writer creation via `std.Io.Writer.fixed(out)` for buffer-based operations

**Error Handling**: Specific error sets with union types:
- `InitError = std.fmt.ParseIntError || error{MissingPrefix} || std.Io.Writer.Error`
- Direct error propagation without generic error sets

**API Structure**: Consistent initialization patterns:
- `Oid` struct initialized directly: `.{ .encoded = data }`
- Factory function `fromDot` returns `InitError!Oid`
- Compile-time variant `fromDotComptime` for static OIDs

## 3) The Golden Snippet

```zig
const std = @import("std");
const Oid = std.crypto.codecs.asn1.Oid;

test "OID conversion example" {
    var encoded_buf: [256]u8 = undefined;
    var dot_buf: [256]u8 = undefined;
    
    // Convert dot notation to encoded OID
    const oid = try Oid.fromDot("1.2.840.113549.1.1.11", &encoded_buf);
    
    // Convert encoded OID back to dot notation
    var stream = std.io.fixedBufferStream(&dot_buf);
    try oid.toDot(stream.writer());
    
    const dot_result = stream.getWritten();
    try std.testing.expectEqualStrings("1.2.840.113549.1.1.11", dot_result);
}
```

## 4) Dependencies

- `std.mem` (for `splitScalar`, `StaticStringMap`)
- `std.fmt` (for `parseInt`, `parseUnsigned`, `hexToBytes`)
- `std.math` (for `log`, `pow`)
- `std.io` (for `Writer` interface)
- `std.testing` (for test assertions)
- Internal: `der.zig`, `../asn1.zig`

**Note**: The file uses `std.Io.Writer` which appears to be a typo - should likely be `std.io.Writer` in Zig 0.16.