# Migration Analysis: `std/crypto/sha2.zig`

## 1) Concept
This file implements the SHA-2 family of cryptographic hash functions from the NIST FIPS 180-4 and SP 800-208 standards. It provides multiple SHA-2 variants including SHA-224, SHA-256, SHA-384, SHA-512, and several truncated versions. The implementation uses compile-time type generation to create specific hash algorithms with optimized implementations for different CPU architectures (x86_64 with SHA extensions and AArch64 with SHA2 instructions).

Key components include:
- Type-generic SHA-32 and SHA-64 implementations (`Sha2x32` and `Sha2x64`)
- Streaming API with init/update/final pattern
- One-shot hash functions for convenience
- Architecture-specific optimizations using inline assembly

## 2) The 0.11 vs 0.16 Diff

**No breaking API changes detected** - the SHA-2 implementation maintains stable interfaces:

- **Explicit Allocator requirements**: None required - this is a pure computational API
- **I/O interface changes**: No I/O dependencies - operates on byte slices
- **Error handling changes**: No error returns - all operations are infallible
- **API structure**: Consistent init/update/final pattern with empty Options struct

The public API remains compatible:
- `init(Options) → Self` - initialization with empty options
- `update(*Self, []const u8)` - streaming data ingestion  
- `final(*Self, *[digest_length]u8)` - compute final hash
- `hash([]const u8, *[digest_length]u8, Options)` - one-shot convenience
- `peek(Self) → [digest_length]u8` - non-destructive finalization

## 3) The Golden Snippet

```zig
const std = @import("std");
const Sha256 = std.crypto.Sha256;

pub fn main() void {
    const input = "hello world";
    var output: [Sha256.digest_length]u8 = undefined;
    
    // One-shot hashing
    Sha256.hash(input, &output, .{});
    
    // Or streaming API
    var hasher = Sha256.init(.{});
    hasher.update("hello");
    hasher.update(" world");
    hasher.final(&output);
    
    std.debug.print("SHA-256 hash: {s}\n", .{std.fmt.bytesToHex(output, .lower)});
}
```

## 4) Dependencies
- `std.mem` - memory operations and endian handling
- `std.math` - bit rotation operations
- `std.debug` - assertion support (in tests)
- `std.testing` - test framework (in tests)

**Migration Impact: Minimal** - This cryptographic module maintains API stability with no breaking changes between Zig 0.11 and 0.16 patterns.