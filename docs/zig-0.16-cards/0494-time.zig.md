# Migration Card: `std/time.zig`

## 1) Concept

This file provides time-related utilities for the Zig standard library, focusing on high-precision timing operations. The key components include:

- **Time unit constants**: Various constants for converting between nanoseconds, microseconds, milliseconds, seconds, minutes, hours, days, and weeks
- **Instant**: A cross-platform timestamp type that represents a moment in time using the system's fastest available timer, with the ability to measure elapsed time between instants
- **Timer**: A monotonic, high-performance timer that ensures consistent time measurements by saturating on the most recent sample to guarantee monotonicity

The file handles platform-specific implementations for Windows, POSIX systems, WASI, and UEFI environments, providing a unified interface for time measurement across different operating systems.

## 2) The 0.11 vs 0.16 Diff

### Explicit Allocator Requirements
- **No allocator dependencies**: Both `Instant` and `Timer` operate without requiring memory allocation, using stack-based initialization
- **Factory functions**: `Instant.now()` and `Timer.start()` are factory functions that return initialized instances rather than requiring separate initialization steps

### Error Handling Changes
- **Specific error types**: Error sets are narrowly defined:
  - `Instant.now()` returns `error{Unsupported}!Instant`
  - `Timer.start()` returns `error{TimerUnsupported}!Timer`
- **No generic error unions**: Uses specific error sets rather than `anyerror`

### API Structure Changes
- **Unified initialization**: Both types use factory patterns (`now()` and `start()`) rather than separate `init` functions
- **Monotonic enforcement**: `Timer` internally ensures monotonic readings by saturating on the most previous sample
- **Platform abstraction**: Cross-platform implementation with consistent interface despite different underlying system calls

## 3) The Golden Snippet

```zig
const std = @import("std");
const time = std.time;

test "basic timer usage" {
    var timer = try time.Timer.start();
    
    // Simulate some work
    var sum: u64 = 0;
    for (0..1000) |_| {
        sum += 1;
    }
    
    const elapsed_ns = timer.read();
    // elapsed_ns now contains nanoseconds since timer.start()
}
```

## 4) Dependencies

- **`std.zig`** - Root standard library import
- **`builtin`** - Compiler builtin functions and target information  
- **`std.debug`** - Debug utilities (assertions)
- **`std.testing`** - Testing framework
- **`std.math`** - Mathematical operations and comparisons
- **`std.os.windows`** - Windows-specific system calls
- **`std.posix`** - POSIX system call interfaces
- **`std/time/epoch.zig`** - Epoch time calculations (internal module)

The file has minimal external dependencies, primarily relying on OS-specific modules (`std.os.windows`, `std.posix`) for platform implementations while maintaining a clean public API surface.